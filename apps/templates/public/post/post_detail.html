{%  extends "base_public.html" %}
{% load static %}

{% block head %}
    <link href="{% static 'leaflet/leaflet.css' %}" rel="stylesheet">
    <script src="{% static 'js/public.js' %}"></script>
{% endblock %}

{% block main %}
    {% include detail_template with detail=True %}
    {% if webmentions_count %}
        {# When turbo is working make webmentions load lazily #}
        <details class="mt-2">
            <summary>
                Interactions
                <div class="inline-block ml-1">
                    <div class="rounded-full flex h-6 w-6 bg-negroni-700 items-center justify-center text-white" title="{{ webmentions_count}} interaction{{ webmentions_count|pluralize }}">{{ webmentions_count }}</div>
                </div>
            </summary>
            <ul>
                {% for t_webmention in webmentions %}
                    {% include "indieweb/webmention/webmention.html" %}
                {% endfor %}
            </ul>
        </details>
    {% endif %}

{% endblock %}

{% block meta %}
    <section class="mb-2">
        <div class="mb-1 flex-col">
            <a href="{% url 'public:post_detail' t_post.uuid %}" class="mb-2 block"><span class="mr-0.5">ðŸ”—</span>permalink</a>
            {% if t_entry.t_location %}
                <div data-controller="meta-map">
                    <div id="map"
                         class="h-24 w-50"
                         data-meta-map-target="map"
                         data-default-lon="{{ t_entry.t_location.point.y}}"
                         data-default-lat="{{ t_entry.t_location.point.x}}"
                         data-default-zoom="4"
                         data-region="{{ t_entry.t_location.region }}"
                         data-country="{{ t_entry.t_location.country_name }}"
                         data-locality="{{ t_entry.t_location.locality }}"
                    ></div>
                    <div class="flex mt-2">
                        <span data-meta-map-target="summary" class="help-text ml-auto"></span>
                    </div>
                    <!-- TODO: Add a small map with the location here. -->
                    <!-- TODO: split admin map into it's own template -->
                    <!-- TODO: Add tests for micropub and make sure location article / status. -->

                </div>
            {% endif %}
        </div>
    </section>
{% endblock %}
