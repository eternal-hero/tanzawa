{%  extends "base.html" %}
{% load utils %}

{% block breadcrumbs_block %}
{% endblock %}

{% block main %}
    <details open>
        <summary open>
            Webmentions
            {% if unread_count %}
                <span class="rounded-full p-1 bg-negroni-700 flex-inline items-center justify-center text-white text-xs">{{ unread_count }}</span>
            {% endif %}
        </summary>
        <ul>
            {% for mention in webmentions %}
                {% if mention.author.name %}
                <li class="pt-4">
                    <div class="flex">
                        <div class="flex-col">
                            <div class="h-card p-author flex items-center">
                                {% if mention.author.photo %}
                                <object data="{{ mention.author.photo|cut:"\'" }}" type="image">
                                    <div class="u-image rounded-full h-12 w-12 bg-negroni-700 flex items-center justify-center text-white" title="{{ mention.author.name }}">{{ mention.author.name|first }}</div>
                                </object>
                                {% endif %}
                                    <div class="p-2 flex flex-col">
                                        {% if mention.author.url %}
                                            <a href="{{ mention.author.url }}">{{ mention.author.name }}</a>
                                        {% endif %}
                                        <a href="{{ mention.source }}" class="text-xs">{{ mention.source|domain }}</a>
                                    </div>
                                </a>
                            </div>
                            <main class="content">
                                <p>{{ mention|get_key:"content-plain"|cut:"\t"|cut:"\n"|urlize|truncatechars_html:140 }}</p>
                            </main>
                            <div class="flex text-sm pt-1">
                                <div class="mr-auto">
                                {% for type in mention.comment_type %}
                                    <span class="rounded-full mr-1 py-0.5 px-1 w-min small border-negroni-700 border border-2 text-negroni-700 font-bold">{{ type }}</span>
                                {% endfor %}
                                </div>
                            </div>
                        </div>
                        <span class="pl-4 inline-block flex-col ml-auto justify-between">
                            <a href="" class="text-4xl block">üëç</a>
                            <a href="" class="text-4xl block mt-2">üëé</a>
                        </span>
                    </div>
                </li>
                {% endif %}
            {% endfor %}
            <a href="{% url 'admin:webmention_webmentionresponse_changelist' %}" class="px-1 py-1 mt-2 inline-block text-sm" title="See more webmentions">View More</a>
        </ul>
    </details>

{% endblock %}


{% block meta %}
    {% include "entry/buttons/create_status.html" %}
{% endblock %}